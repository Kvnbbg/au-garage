<!DOCTYPE html>
<html lang="{{ session.get('lang', 'en') }}">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Ensure proper scaling on mobile/tablet devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Language" content="{{ session.get('lang', 'en') }}" />
    <meta name="description" content="Au Garage ‚Äì A hub for automotive and mechanical excellence." />
    <meta name="keywords" content="Mechanics, Classical Mechanics, Engineering, Simulation, Calibration" />
    <meta name="author" content="Kevin Marville" />
    <title>{% block title %}Au Garage{% endblock %}</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicon.ico') }}" type="image/x-icon" />

    <!-- External Stylesheets -->
    <link rel="stylesheet" href="https://demo.dashboardpack.com/architectui-html-free/main.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom Extended CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <style>
      :root {
        --primary-color: #6f4e37;
        --secondary-color: #8b5e3c;
        --accent-color: #d2a679;
        --highlight-color: #c87533;
        --background-color: #f7f3e8;
        --text-color: #4b382a;
        --card-bg: #ffffff;
        --border-color: #d2a679;
        --transition-speed: 0.3s;
        --border-radius: 8px;
        --shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      body {
        font-family: 'Roboto', sans-serif;
        background: var(--background-color);
        color: var(--text-color);
        padding: 20px;
        min-height: 100vh;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        background: var(--card-bg);
        padding: 20px;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
      }
      .log-container {
        height: 300px;
        overflow-y: auto;
        border: 1px solid var(--border-color);
        padding: 10px;
        border-radius: var(--border-radius);
        background: var(--highlight-color);
      }
      .btn {
        padding: 10px 15px;
        border-radius: var(--border-radius);
        border: none;
        cursor: pointer;
        transition: background var(--transition-speed);
      }
      .btn-primary {
        background: var(--primary-color);
        color: #fff;
      }
      .btn-secondary {
        background: var(--secondary-color);
        color: #fff;
      }
      .btn:hover {
        opacity: 0.8;
      }
      /* Sticky header (and other sticky panels) */
      .sticky-header {
        position: sticky;
        top: 0;
        z-index: 1000;
      }
      /* Simple particle effect on hover */
      .particle-effect {
        position: relative;
        overflow: hidden;
      }
      .particle-effect::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
        opacity: 0;
        transition: opacity 0.5s ease;
      }
      .particle-effect:hover::after {
        opacity: 1;
      }
      /* Dark mode class */
      .dark-mode {
        background: #222;
        color: #ddd;
      }
      /* === ASIDE === */
      /* VR DISPLAY LOG AND START BUTTON */
      /* VR Log Display Panel (Bottom-Left) */
#vrLogPanel {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 320px;
  display: none;
  background: rgba(0, 0, 0, 0.85); /* Slight transparency for better blending */
  border-radius: 12px;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
  animation: float 4s ease-in-out infinite;
  overflow: hidden;
}

/* Panel Header */
#vrLogPanel header {
  background: #263238; /* Darker shade for contrast */
  color: #ffffff;
  padding: 12px;
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  font-weight: bold;
  text-align: center;
}

/* Log Container */
#vrLogContainer {
  background: #eceff1; /* Soft gray background */
  padding: 10px;
  max-height: 200px;
  overflow-y: auto;
  font-size: 14px;
  color: #37474f; /* Dark gray text */
  border-bottom-left-radius: 12px;
  border-bottom-right-radius: 12px;
}

/* Buttons */
#vrLogPanel .btn {
  font-size: 14px;
  padding: 8px 16px;
  border-radius: 50px;
  cursor: pointer;
  transition: background 0.3s, transform 0.3s;
}

#vrLogPanel .btn-primary {
  background: #00796b;
  border: 1px solid #004d40;
  color: #ffffff;
}

#vrLogPanel .btn-primary:hover {
  background: #004d40;
  transform: translateY(-3px);
}

#vrLogPanel .btn-secondary {
  background: #b0bec5;
  border: 1px solid #78909c;
  color: #263238;
}

#vrLogPanel .btn-secondary:hover {
  background: #78909c;
  transform: translateY(-3px);
}

/* Floating Animation */
@keyframes float {
  0% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
  100% {
    transform: translateY(0);
  }
}

      
    </style>
    {% block head %}{% endblock %}

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "AutoRepair",
        "name": "Au Garage",
        "url": "https://github.com/Kvnbbg/au-garage",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "xxxxx",
          "addressLocality": "Rivierre-Sal√©e, Martinique",
          "postalCode": "97215",
          "addressCountry": "MQ"
        },
        "telephone": "+33634160418"
      }
    </script>
  </head>
  <body class="d-flex flex-column" style="min-height: 100vh;">
    <!-- Skip link for screen readers -->
    <a href="#mainContent" class="sr-only sr-only-focusable">Skip to main content</a>

    <!-- HEADER: Navigation (sticky for mobile/tablet users) -->
    <header class="sticky-header">
      <nav class="navbar navbar-expand-lg navbar" aria-label="Main Navigation">
        <div class="container">
          <a class="navbar-brand" href="{{ url_for('main.home') }}">
            <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Au Garage Logo" width="50" height="50" />
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                <a class="nav-link particle-effect" href="{{ url_for('auth.set_language', language='en') }}" aria-label="Switch to English">üá∫üá∏ English</a>
              </li>
              <li class="nav-item">
                <a class="nav-link particle-effect" href="{{ url_for('auth.set_language', language='fr') }}" aria-label="Basculer en Fran√ßais">üá´üá∑ Fran√ßais</a>
              </li>
              <li class="nav-item">
                <a class="nav-link particle-effect" href="#" data-toggle="modal" data-target="#versionModal" aria-label="Version Information">Version</a>
              </li>
              <!-- New Bluesky Connect Button -->
              <li class="nav-item">
                <button id="blueskyConnectBtn" class="btn btn-primary particle-effect" aria-label="Bluesky Connect">
                  Bluesky Connect
                </button>
              </li>
              {% if not current_user.is_authenticated %}
                <li class="nav-item">
                  <a class="nav-link particle-effect" href="{{ url_for('auth.login') }}">Login</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link particle-effect" href="https://kvnbbg.github.io/500Discount/">5D</a>
                </li>
              {% else %}
                <li class="nav-item">
                  <a class="nav-link particle-effect" href="{{ url_for('auth.dashboard') }}">Dashboard</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link particle-effect" href="{{ url_for('auth.logout') }}">Logout</a>
                </li>
              {% endif %}
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- MAIN CONTENT -->
    <main id="mainContent" class="flex-grow-1">
      <!-- Dark Mode Toggle Button 
<button id="darkModeToggle" class="btn btn-secondary">Toggle Dark Mode</button>

<script>
  // Dark Mode Toggle (if needed, attach to an element with id "darkModeToggle")
  document.getElementById('darkModeToggle')?.addEventListener('click', (e) => {
    e.preventDefault();
    document.body.classList.toggle('dark-mode');
    localStorage.setItem('darkMode', document.body.classList.contains('dark-mode') ? 'enabled' : 'disabled');
  });

  // Load saved dark mode preference
  if (localStorage.getItem('darkMode') === 'enabled') {
    document.body.classList.add('dark-mode');
  }
</script>

<style>
  /* Dark Mode Styling */
  .dark-mode {
    background-color: #121212;
    color: #ffffff;
  }

  .dark-mode .btn {
    background-color: #333;
    color: white;
    border-color: #555;
  }
</style>
-->
      <div class="container my-5">
        <!-- Hero Section -->
        <section class="mb-5" aria-labelledby="heroTitle">
          <div class="text-center">
            {% if session.get('lang', 'en') == 'fr' %}
              <h1 id="heroTitle" class="text-dark">M√©canique</h1>
              <h2 class="text-muted">Fondements et applications de la m√©canique classique</h2>
            {% else %}
              <h1 id="heroTitle" class="text-dark">Mechanics</h1>
              <h2 class="text-muted">Fundamentals and Applications of Classical Mechanics</h2>
            {% endif %}
          </div>
        </section>

        <!-- About Section -->
        <section id="about" class="mb-5" aria-labelledby="aboutTitle">
          {% if session.get('lang', 'en') == 'fr' %}
            <h2 id="aboutTitle" class="decorative-title">Principes</h2>
            <p>
              La m√©canique classique √©tudie le mouvement des corps et les forces agissant sur eux. Les lois de Newton sont fondamentales pour comprendre
              l'√©quilibre et l'acc√©l√©ration dans tout syst√®me physique.
            </p>
          {% else %}
            <h2 id="aboutTitle" class="decorative-title">Principles</h2>
            <p>
              Classical mechanics examines the motion of bodies and the forces acting upon them. Newton‚Äôs laws form the foundation for understanding
              equilibrium and acceleration in physical systems.
            </p>
          {% endif %}
         <button class="btn btn-secondary particle-effect" id="examplePopup" onclick="window.location.href='{{ url_for('vr') }}'">
    {% if session.get('lang', 'en') == 'fr' %}Ouvrir VR{% else %}Open VR{% endif %}
</button>

        </section>

        <!-- CSS for inner scrolling and zoom effect -->
<style>
  .zoom-container {
    overflow: auto;
    max-height: 500px; /* Adjust height as needed */
    position: relative;
  }
  .zoom-container img {
    transition: transform 0.3s ease;
    width: 100%;
    height: auto;
  }
  .zoom-container:hover img {
    transform: scale(1.1);
  }
</style>

<!-- Fallback JS: cycles through fallback image URLs if the current one fails -->
<script>
function loadImageWithFallback(img, sources) {
  if (!img.dataset.fallbackIndex) {
    img.dataset.fallbackIndex = 0;
  }
  var index = parseInt(img.dataset.fallbackIndex);
  if (index < sources.length) {
    img.src = sources[index];
    img.dataset.fallbackIndex = index + 1;
  } else {
    // A final placeholder image if all fallbacks fail
    img.src = "{{ url_for('static', filename='images/placeholder.jpg') }}";
  }
}
</script>

<!-- Carousel / Gifts Section -->
<section id="carousel" class="mb-5" aria-labelledby="carouselTitle">
  {% if session.get('lang', 'en') == 'fr' %}
    <h2 id="carouselTitle" class="decorative-title">Cadeaux</h2>
  {% else %}
    <h2 id="carouselTitle" class="decorative-title">Gifts</h2>
  {% endif %}

  {# Define a list of carousel images with professional, clickable titles and descriptions #}
  {% set carousel_images = [
    {
      'primary': 'https://openverse.org/image/6d3cd0dc-0459-4a7a-b426-1e8e849f91a1?q=study&p=59',
      'fallbacks': [ url_for('static', filename='images/slide1.jpg'),
                     url_for('static', filename='images/service-example.jpg') ],
      'title_fr': '<a href="https://fr.wikipedia.org/wiki/M√©canique" target="_blank">Les Fondamentaux de la M√©canique</a>',
      'desc_fr': 'D√©couvrez les principes √©prouv√©s r√©gissant la m√©canique des mat√©riaux, illustr√©s par des exemples pratiques extraits de la litt√©rature technique.',
      'title_en': '<a href="https://en.wikipedia.org/wiki/Mechanics" target="_blank">Fundamentals of Mechanics</a>',
      'desc_en': 'Explore the proven principles governing the mechanics of materials, illustrated with practical examples drawn from technical literature.'
    },
    {
      'primary': url_for('static', filename='images/slide2.jpg'),
      'fallbacks': [ url_for('static', filename='images/service-example2.jpg'),
                     url_for('static', filename='images/service-example3.jpg') ],
      'title_fr': '<a href="https://fr.wikipedia.org/wiki/M√©canique_classique" target="_blank">Approches Classiques en M√©canique</a>',
      'desc_fr': 'Une analyse approfondie des m√©thodes classiques appliqu√©es aux √©tudes m√©caniques avanc√©es, essentielle pour √©tudiants et professionnels.',
      'title_en': '<a href="https://en.wikipedia.org/wiki/Classical_mechanics" target="_blank">Classical Mechanics Approaches</a>',
      'desc_en': 'An in-depth analysis of classical methods applied to advanced mechanical studies, essential for both students and professionals.'
    },
    {
      'primary': url_for('static', filename='images/slide3.jpg'),
      'fallbacks': [ url_for('static', filename='images/service-example4.jpg'),
                     url_for('static', filename='images/service-example5.jpg') ],
      'title_fr': '<a href="https://fr.wikipedia.org/wiki/Dynamique" target="_blank">Dynamique et Syst√®mes Complexes</a>',
      'desc_fr': 'Plongez dans l\'√©tude de la dynamique des syst√®mes complexes √† travers une approche innovante int√©grant les derni√®res avanc√©es en ing√©nierie.',
      'title_en': '<a href="https://en.wikipedia.org/wiki/Dynamics" target="_blank">Dynamics and Complex Systems</a>',
      'desc_en': 'Delve into the study of complex systems dynamics with an innovative approach that integrates the latest advancements in engineering.'
    },
    {
      'primary': url_for('static', filename='images/vehicule1.jpg'),
      'fallbacks': [ url_for('static', filename='images/vehicule2.jpg'),
                     url_for('static', filename='images/vehicule3.jpg') ],
      'title_fr': '<a href="https://fr.wikipedia.org/wiki/Ing√©nierie" target="_blank">Innovation en Ing√©nierie Automobile</a>',
      'desc_fr': 'D√©couvrez les innovations r√©centes en ing√©nierie automobile, alliant performance et durabilit√© pour fa√ßonner l\'avenir des transports.',
      'title_en': '<a href="https://en.wikipedia.org/wiki/Engineering" target="_blank">Automotive Engineering Innovations</a>',
      'desc_en': 'Discover the latest innovations in automotive engineering that combine performance and durability to shape the future of transportation.'
    },
    {
      'primary': url_for('static', filename='images/vehicule4.jpg'),
      'fallbacks': [ url_for('static', filename='images/vehicule5.jpg') ],
      'title_fr': '<a href="https://fr.wikipedia.org/wiki/Technologie" target="_blank">Technologies de Pointe en M√©canique</a>',
      'desc_fr': 'Examinez en d√©tail les technologies de pointe qui r√©volutionnent l\'industrie m√©canique, offrant des perspectives in√©dites pour demain.',
      'title_en': '<a href="https://en.wikipedia.org/wiki/Technology" target="_blank">Cutting-Edge Mechanical Technologies</a>',
      'desc_en': 'Examine in detail the cutting-edge technologies revolutionizing the mechanical industry, offering unprecedented prospects for the future.'
    }
  ] %}
  
  <div id="featuredCarousel" class="carousel slide" data-ride="carousel">
    <!-- Carousel indicators -->
    <ol class="carousel-indicators">
      {% for image in carousel_images %}
        <li data-target="#featuredCarousel" data-slide-to="{{ loop.index0 }}" class="{% if loop.first %}active{% endif %}"></li>
      {% endfor %}
    </ol>
    
    <!-- Carousel inner -->
    <div class="carousel-inner">
      {% for image in carousel_images %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <!-- Wrap image in a zoomable, scrollable container -->
        <div class="zoom-container">
          <img src="{{ image.primary }}" 
               onerror="loadImageWithFallback(this, [ {% for fallback in image.fallbacks %}'{{ fallback }}'{% if not loop.last %}, {% endif %}{% endfor %} ])" 
               class="d-block w-100" alt="Slide {{ loop.index }}">
        </div>
        <div class="carousel-caption d-none d-md-block">
          {% if session.get('lang', 'en') == 'fr' %}
            <h5>{{ image.title_fr | safe }}</h5>
            <p>{{ image.desc_fr }}</p>
          {% else %}
            <h5>{{ image.title_en | safe }}</h5>
            <p>{{ image.desc_en }}</p>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    
    <!-- Carousel controls -->
    <a class="carousel-control-prev" href="#featuredCarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">
        {% if session.get('lang', 'en') == 'fr' %}Pr√©c√©dent{% else %}Previous{% endif %}
      </span>
    </a>
    <a class="carousel-control-next" href="#featuredCarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">
        {% if session.get('lang', 'en') == 'fr' %}Suivant{% else %}Next{% endif %}
      </span>
    </a>
  </div>
</section>

<!-- Bluesky Section -->
<section id="bluesky-section">
  <!-- Styles internes -->
  <style>
    /* Style global de la section */
    #bluesky-section {
      padding: 20px;
      font-family: Arial, sans-serif;
      color: #333;
      position: relative;
    }
    /* Conteneur des logs */
    .log-container {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 5px;
      padding: 15px;
      margin-bottom: 20px;
      max-height: 200px;
      overflow-y: auto;
    }
    /* Animation Fade In pour les logs */
    .fade-in {
      animation: fadeIn 0.5s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    /* Menu dropdown anim√© */
    .dropdown-menu {
      border: 1px solid #ccc;
      border-radius: 5px;
      background: #fff;
      position: absolute;
      z-index: 100;
      padding: 10px;
      min-width: 180px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease-in-out;
    }
    .dropdown-menu.open {
      opacity: 1;
      visibility: visible;
    }
    .dropdown-menu a {
      display: block;
      padding: 5px 10px;
      color: #007bff;
      text-decoration: none;
    }
    .dropdown-menu a:hover,
    .dropdown-menu a:focus {
      background-color: #f1f1f1;
      outline: none;
    }
    /* Bouton flottant d'accessibilit√© */
    .floating-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      z-index: 1000;
      transition: transform 0.3s ease;
    }
    .floating-button:hover {
      transform: scale(1.1);
    }
    .floating-button:focus {
      outline: 3px solid #ff0;
    }
    /* Mode haute-contraste (accessibilit√©) */
    .high-contrast {
      background-color: #000 !important;
      color: #fff !important;
    }
    .high-contrast .log-container {
      background-color: #333 !important;
      border-color: #fff !important;
      color: #fff !important;
    }
    .high-contrast .btn {
      background-color: #444 !important;
      border-color: #888 !important;
      color: #fff !important;
    }
  </style>

  <!-- Section Bluesky Logs -->
  <section id="bluesky-logs" class="container text-center my-5" aria-labelledby="blueskyLogTitle">
    <h2 id="blueskyLogTitle" class="mb-3">Bluesky Log Display</h2>
    <p>
      This section shows real‚Äëtime logs for the Bluesky connection with full accessibility features.
    </p>
    <div id="blueskyLogContainer" class="log-container" aria-live="polite">
      <p class="fade-in">Initializing Bluesky connection...</p>
    </div>
    <div class="d-flex flex-wrap justify-content-center gap-2">
      <button onclick="connectToBluesky()" class="btn btn-primary">Reconnect</button>
      <button onclick="clearBlueskyLogs()" class="btn btn-secondary">Clear Logs</button>
      <button onclick="toggleDropdown()" class="btn btn-info" aria-haspopup="true" aria-expanded="false">
        Options
      </button>
    </div>
    <!-- Menu dropdown accessible -->
    <div id="optionsDropdown" class="dropdown-menu" aria-label="Options">
      <a href="#" onclick="openVRPanel(); return false;">Connect VR</a>
      <a href="https://bsky.app/profile/techandstream.bsky.social" target="_blank">Follow me on Bluesky</a>
    </div>
  </section>

  <!-- Section VR Logs -->
  <section id="vr-logs" class="container text-center my-5" aria-labelledby="vrLogTitle">
    <h2 id="vrLogTitle" class="mb-3">VR Log Display</h2>
    <div id="vrLogContainer" class="log-container" aria-live="polite">
      <p class="fade-in">Initializing VR connection...</p>
    </div>
    <div class="d-flex flex-wrap justify-content-center gap-2">
      <button onclick="startVR()" class="btn btn-primary">Start VR</button>
      <button onclick="connectToVR()" class="btn btn-primary">Reconnect</button>
      <button onclick="clearVRLogs()" class="btn btn-secondary">Clear Logs</button>
    </div>
  </section>

  <!-- Bouton flottant d'accessibilit√© -->
  <button id="accessibilityButton" class="floating-button" 
          aria-label="Toggle High Contrast Mode" title="Toggle High Contrast Mode">
    &#9881;
  </button>

  <!-- Scripts √©tendus avec animations et dynamiques -->
  <script>
    /* Toggle du menu dropdown avec animation */
    function toggleDropdown() {
      var dropdown = document.getElementById('optionsDropdown');
      if (!dropdown) return;
      dropdown.classList.toggle('open');
    }
    
    /* Fonctions pour les logs Bluesky avec animations */
    function connectToBluesky() {
      try {
        var container = document.getElementById('blueskyLogContainer');
        if (!container) throw new Error("Bluesky log container not found.");
        var log = document.createElement("p");
        log.textContent = "Bluesky connection established at " + new Date().toLocaleTimeString();
        log.classList.add("fade-in");
        container.appendChild(log);
      } catch (error) {
        console.error(error);
      }
    }
    
    function clearBlueskyLogs() {
      var container = document.getElementById('blueskyLogContainer');
      if (container) {
        container.innerHTML = "";
      }
    }
    
    /* Fonctions pour les logs VR avec animations */
    function openVRPanel() {
      // Animation de scroll douce vers la section VR
      var vrSection = document.getElementById('vr-logs');
      if (vrSection) {
        vrSection.scrollIntoView({ behavior: "smooth" });
      }
    }
    
    function startVR() {
      try {
        var container = document.getElementById('vrLogContainer');
        if (!container) throw new Error("VR log container not found.");
        var log = document.createElement("p");
        log.textContent = "VR connection started at " + new Date().toLocaleTimeString();
        log.classList.add("fade-in");
        container.appendChild(log);
      } catch (error) {
        console.error(error);
      }
    }
    
    function connectToVR() {
      try {
        var container = document.getElementById('vrLogContainer');
        if (!container) throw new Error("VR log container not found.");
        var log = document.createElement("p");
        log.textContent = "Reconnecting to VR at " + new Date().toLocaleTimeString();
        log.classList.add("fade-in");
        container.appendChild(log);
      } catch (error) {
        console.error(error);
      }
    }
    
    function clearVRLogs() {
      var container = document.getElementById('vrLogContainer');
      if (container) {
        container.innerHTML = "";
      }
    }
    
    /* Basculement du mode haute-contraste pour l'accessibilit√© */
    document.getElementById('accessibilityButton').addEventListener('click', function() {
      document.body.classList.toggle('high-contrast');
    });
    
    /* Fermeture du dropdown via la touche Escape pour les utilisateurs clavier */
    document.addEventListener('keydown', function(e) {
      if (e.key === "Escape") {
        var dropdown = document.getElementById('optionsDropdown');
        if (dropdown) {
          dropdown.classList.remove('open');
        }
      }
    });
  </script>
</section>


        <!-- Feedback Section -->
        <section id="feedback-section" class="mb-5" aria-labelledby="feedbackTitle">
          <h2 id="feedbackTitle" class="decorative-title">Feedback &amp; Support</h2>
          <p>We value your feedback. Use the form below to share your thoughts.</p>
          <form id="feedbackForm">
            <div class="form-group">
              <label for="feedbackName">Your Name:</label>
              <input type="text" id="feedbackName" class="form-control" placeholder="Enter your name" required />
            </div>
            <div class="form-group">
              <label for="feedbackEmail">Your Email:</label>
              <input type="email" id="feedbackEmail" class="form-control" placeholder="Enter your email" required />
            </div>
            <div class="form-group">
              <label for="feedbackMessage">Your Feedback:</label>
              <textarea id="feedbackMessage" class="form-control" placeholder="Enter your feedback" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Submit Feedback</button>
          </form>
        </section>
      </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-dark text-white mt-auto">
      <div class="container py-3">
        <div class="mb-3">
          <h3 class="decorative-title">Follow &copy;</h3>
          <div class="social-links">
            <a href="https://kvnbbg.fr" target="_blank" rel="noopener noreferrer" class="text-white mx-2">
              <i class="fas fa-rss"></i> Blog
            </a>
            <a href="https://www.instagram.com/techandstream" target="_blank" rel="noopener noreferrer" class="text-white mx-2">
              <i class="fab fa-instagram"></i> Instagram
            </a>
            <a href="https://www.threads.net/@techandstream" target="_blank" rel="noopener noreferrer" class="text-white mx-2">
              <i class="fas fa-comment-dots"></i> Threads
            </a>
            <a href="https://x.com/techandstream" target="_blank" rel="noopener noreferrer" class="text-white mx-2">
              <i class="fab fa-twitter"></i> X
            </a>
            <a href="https://www.youtube.com/techandstream" target="_blank" rel="noopener noreferrer" class="text-white mx-2">
              <i class="fab fa-youtube"></i> YouTube
            </a>
            <a href="https://www.facebook.com/kvnbbg" target="_blank" rel="noopener noreferrer" class="text-white mx-2">
              <i class="fab fa-facebook-f"></i> Facebook
            </a>
          </div>
        </div>
        <p class="mb-0">&copy; 2025 Kevin Marville. All rights reserved.</p>
      </div>
    </footer>

    {% block scripts %}
      <!-- Core JavaScript Libraries -->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

      <!-- Custom JavaScript -->
      <script>
        // Simple particle effect for buttons (additional to CSS)
        document.querySelectorAll('.particle-effect').forEach((el) => {
          el.addEventListener('mouseenter', () => {
            el.style.boxShadow = '0 0 15px rgba(0, 123, 255, 0.5)';
          });
          el.addEventListener('mouseleave', () => {
            el.style.boxShadow = 'none';
          });
        });

        // Dark Mode Toggle (if needed, attach to an element with id "darkModeToggle")
        document.getElementById('darkModeToggle')?.addEventListener('click', (e) => {
          e.preventDefault();
          document.body.classList.toggle('dark-mode');
        });

        // Feedback Modal Functions
        function closeFeedbackModal() {
          document.getElementById('feedbackModal').classList.remove('active');
          $('#feedbackModal').modal('hide');
        }
        function submitFeedbackModal() {
          const feedback = document.getElementById('modalFeedbackText').value;
          console.log('Feedback submitted:', feedback);
          alert('Thank you for your feedback!');
          document.getElementById('modalFeedbackText').value = '';
          closeFeedbackModal();
        }

        // Security Check-in Logging (every 30 seconds)
        function securityCheckIn() {
          const now = new Date().toISOString();
          console.log('[SECURITY] Check in at ' + now);
        }
        setInterval(securityCheckIn, 30000);

        // Distribution Loop: Example log distribution (every 60 seconds)
        function distributionLoop() {
          const blueskyLogs = document.getElementById('blueskyLogContainer').innerHTML;
          const vrLogs = document.getElementById('vrLogContainer').innerHTML;
          const payload = { bluesky: blueskyLogs, vr: vrLogs, timestamp: new Date().toISOString() };
          console.log('[DISTRIBUTION] Sending logs...', payload);
          fetch('/distribute-logs', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          })
            .then((response) => {
              if (response.ok) {
                console.log('[DISTRIBUTION] Logs distributed successfully.');
              } else {
                console.error('[DISTRIBUTION] Failed with status ' + response.status);
              }
            })
            .catch((error) => {
              console.error('[DISTRIBUTION] Error: ' + error.message);
            });
        }
        setInterval(distributionLoop, 60000);

        // Simulated Bluesky Connection with Handshake Tracking
        async function connectToBluesky() {
          const logContainer = document.getElementById('blueskyLogContainer');
          logContainer.innerHTML += "<p class='text-blue-700'>[Bluesky HANDSHAKE] Initiating connection...</p>";
          try {
            const response = await fetch('https://bsky.social/api/session');
            if (!response.ok) throw new Error(`HTTP status ${response.status}`);
            logContainer.innerHTML += "<p class='text-green-700'>[Bluesky HANDSHAKE] Connection successful!</p>";
          } catch (error) {
            logContainer.innerHTML += `<p class='text-red-700'>[Bluesky HANDSHAKE] Connection failed: ${error.message}</p>`;
            alternativeBlueskyConnect();
          }
        }
        function alternativeBlueskyConnect() {
          const logContainer = document.getElementById('blueskyLogContainer');
          logContainer.innerHTML += "<p class='text-orange-700'>[Bluesky HANDSHAKE] Attempting alternative connection...</p>";
          setTimeout(() => {
            logContainer.innerHTML += "<p class='text-green-700'>[Bluesky HANDSHAKE] Alternative connection established.</p>";
          }, 2000);
        }

        // Simulated VR Connection with Handshake Tracking
        async function connectToVR() {
          const logContainer = document.getElementById('vrLogContainer');
          logContainer.innerHTML += "<p class='text-blue-700'>[VR HANDSHAKE] Initiating VR connection...</p>";
          try {
            const response = await fetch('https://vr.example.com/api/session');
            if (!response.ok) throw new Error(`HTTP status ${response.status}`);
            logContainer.innerHTML += "<p class='text-green-700'>[VR HANDSHAKE] VR connection successful!</p>";
          } catch (error) {
            logContainer.innerHTML += `<p class='text-red-700'>[VR HANDSHAKE] VR connection failed: ${error.message}</p>`;
            alternativeVRConnect();
          }
        }
        function alternativeVRConnect() {
          const logContainer = document.getElementById('vrLogContainer');
          logContainer.innerHTML += "<p class='text-orange-700'>[VR HANDSHAKE] Attempting alternative VR connection...</p>";
          setTimeout(() => {
            logContainer.innerHTML += "<p class='text-green-700'>[VR HANDSHAKE] Alternative VR connection established.</p>";
          }, 2000);
        }

        // Clear Log Functions
        function clearBlueskyLogs() {
          document.getElementById('blueskyLogContainer').innerHTML = "<p class='text-gray-700'>Bluesky logs cleared.</p>";
        }
        function clearVRLogs() {
          document.getElementById('vrLogContainer').innerHTML = "<p class='text-gray-700'>VR logs cleared.</p>";
        };

     
      </script>
    {% endblock %}
  </body>
</html>
