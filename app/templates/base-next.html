<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lego Vehicle Simulation – Premium Edition</title>
  <style>
    /* Reset & Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body, html {
      width: 100%;
      height: 100%;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: #f5f5f7;
      color: #1d1d1f;
    }
    /* Game Area */
    #game-area {
      position: relative;
      width: 100%;
      height: 100vh;
      background-color: #eaeaea;
    }
    /* Controls Panel */
    #controls {
      position: absolute;
      top: 20px;
      left: 20px;
      padding: 20px;
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 10;
    }
    #controls h3 {
      font-size: 18px;
      margin-bottom: 10px;
    }
    #controls button {
      display: block;
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      font-size: 16px;
      background-color: #007aff;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #controls button:hover {
      background-color: #005bb5;
    }
    /* Header Overlay */
    header {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 10px;
      color: #fff;
      z-index: 10;
      text-align: right;
      max-width: 300px;
    }
    header h2 {
      font-size: 20px;
      margin-bottom: 8px;
    }
    header p {
      font-size: 14px;
      line-height: 1.4;
    }
    /* Info Section */
    #info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 20px;
      background: #fff;
      border-top: 1px solid #ccc;
      font-size: 15px;
      max-height: 25vh;
      overflow-y: auto;
      z-index: 10;
    }
    #info h2 {
      font-size: 18px;
      margin-bottom: 10px;
    }
    #info p {
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <!-- Main Game Area -->
  <div id="game-area">
    <!-- Controls Panel -->
    <div id="controls">
      <h3 id="controls-title">Lego Vehicle Controls</h3>
      <button id="toggle-lang">Français</button>
      <button id="rotate-left">Rotate Left</button>
      <button id="rotate-right">Rotate Right</button>
      <button id="move-forward">Move Forward</button>
      <button id="move-backward">Move Backward</button>
      <button id="reset">Reset</button>
    </div>
    <!-- Header Overlay -->
    <header id="header">
      <h2 id="header-title">Lego Vehicle Simulation</h2>
      <p id="header-desc">Experience a modular, lego-style animation powered by Three.js.</p>
    </header>
  </div>
  
  <!-- Additional Information Section -->
  <div id="info">
    <h2 id="info-title">About the Simulation</h2>
    <p id="info-text">
      This simulation represents a vehicle built entirely from lego‑like components. Each part—chassis, cabin, bumpers, and wheels—is modeled as a modular block. Use the on-screen controls to rotate and move the vehicle. Enjoy smooth animations, refined effects, and a user experience designed to feel as effortless as an Apple product.
    </p>
  </div>
  
  <!-- Three.js Library (v0.141.0) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.141.0/three.min.js"></script>
  <script>
    /* ---------- LANGUAGE TOGGLE & TRANSLATIONS ---------- */
    let currentLanguage = 'en';
    const translations = {
      en: {
        controlsTitle: "Lego Vehicle Controls",
        headerTitle: "Lego Vehicle Simulation",
        headerDesc: "Experience a modular, lego-style animation powered by Three.js.",
        infoTitle: "About the Simulation",
        infoText: "This simulation represents a vehicle built entirely from lego‑like components. Each part—chassis, cabin, bumpers, and wheels—is modeled as a modular block. Use the on-screen controls to rotate and move the vehicle. Enjoy smooth animations, refined effects, and a user experience designed to feel as effortless as an Apple product.",
        rotateLeft: "Rotate Left",
        rotateRight: "Rotate Right",
        moveForward: "Move Forward",
        moveBackward: "Move Backward",
        reset: "Reset",
        toggleLang: "Français"
      },
      fr: {
        controlsTitle: "Contrôles du véhicule Lego",
        headerTitle: "Simulation de véhicule Lego",
        headerDesc: "Découvrez une animation modulaire de style Lego réalisée avec Three.js.",
        infoTitle: "À propos de la simulation",
        infoText: "Cette simulation représente un véhicule construit entièrement à partir de composants de type Lego. Chaque partie—châssis, cabine, pare-chocs et roues—is modélisée comme un bloc modulable. Utilisez les commandes à l'écran pour faire pivoter et déplacer le véhicule. Profitez d'animations fluides, d'effets raffinés et d'une expérience utilisateur conçue pour être aussi simple qu'un produit Apple.",
        rotateLeft: "Tourner à gauche",
        rotateRight: "Tourner à droite",
        moveForward: "Avancer",
        moveBackward: "Reculer",
        reset: "Réinitialiser",
        toggleLang: "English"
      }
    };

    function updateLanguage() {
      const t = translations[currentLanguage];
      document.getElementById('controls-title').textContent = t.controlsTitle;
      document.getElementById('header-title').textContent = t.headerTitle;
      document.getElementById('header-desc').textContent = t.headerDesc;
      document.getElementById('info-title').textContent = t.infoTitle;
      document.getElementById('info-text').textContent = t.infoText;
      document.getElementById('rotate-left').textContent = t.rotateLeft;
      document.getElementById('rotate-right').textContent = t.rotateRight;
      document.getElementById('move-forward').textContent = t.moveForward;
      document.getElementById('move-backward').textContent = t.moveBackward;
      document.getElementById('reset').textContent = t.reset;
      document.getElementById('toggle-lang').textContent = t.toggleLang;
    }
    
    document.getElementById('toggle-lang').addEventListener('click', () => {
      currentLanguage = (currentLanguage === 'en') ? 'fr' : 'en';
      updateLanguage();
    });
    
    updateLanguage(); // Set initial language texts

    /* ---------- THREE.JS LEGO VEHICLE SIMULATION ---------- */
    let scene, camera, renderer, legoVehicle;
    let clock = new THREE.Clock();
    let vehicleSpeed = 0;
    let vehicleRotationSpeed = 0;
    
    function init() {
      // Create Scene
      scene = new THREE.Scene();
      scene.background = new THREE.Color(0xeaeaea);
      
      // Setup Camera
      camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 5, 10);
      camera.lookAt(0, 0, 0);
      
      // Renderer with premium settings
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.toneMapping = THREE.ACESFilmicToneMapping;
      renderer.toneMappingExposure = 1;
      renderer.shadowMap.enabled = true;
      renderer.shadowMap.type = THREE.PCFSoftShadowMap;
      renderer.outputEncoding = THREE.sRGBEncoding;
      document.getElementById('game-area').appendChild(renderer.domElement);
      
      // Lights
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
      scene.add(ambientLight);
      const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
      directionalLight.position.set(10, 20, 10);
      directionalLight.castShadow = true;
      scene.add(directionalLight);
      
      // Ground Plane
      const groundGeometry = new THREE.PlaneGeometry(100, 100);
      const groundMaterial = new THREE.MeshPhongMaterial({ color: 0x808080 });
      const ground = new THREE.Mesh(groundGeometry, groundMaterial);
      ground.rotation.x = -Math.PI / 2;
      ground.receiveShadow = true;
      scene.add(ground);
      
      // Build Lego Vehicle as a Group
      legoVehicle = new THREE.Group();
      
      // --- Chassis (Base Plate) ---
      const chassisGeometry = new THREE.BoxGeometry(4, 0.4, 2);
      const chassisMaterial = new THREE.MeshPhongMaterial({ color: 0xff3b30 });
      const chassis = new THREE.Mesh(chassisGeometry, chassisMaterial);
      chassis.castShadow = true;
      chassis.receiveShadow = true;
      chassis.position.y = 0.5;
      legoVehicle.add(chassis);
      
      // --- Cabin (Lego Brick) with pulsating effect ---
      const cabinGeometry = new THREE.BoxGeometry(2, 1, 1.5);
      const cabinMaterial = new THREE.MeshPhongMaterial({ color: 0x34c759 });
      const cabin = new THREE.Mesh(cabinGeometry, cabinMaterial);
      cabin.castShadow = true;
      cabin.receiveShadow = true;
      cabin.position.set(0, 1.2, 0);
      cabin.userData.originalScale = cabin.scale.clone();
      legoVehicle.add(cabin);
      
      // --- Front Bumper ---
      const frontGeometry = new THREE.BoxGeometry(0.4, 0.3, 2);
      const frontMaterial = new THREE.MeshPhongMaterial({ color: 0x007aff });
      const frontBumper = new THREE.Mesh(frontGeometry, frontMaterial);
      frontBumper.castShadow = true;
      frontBumper.receiveShadow = true;
      frontBumper.position.set(-2.2, 0.8, 0);
      legoVehicle.add(frontBumper);
      
      // --- Rear Bumper ---
      const rearGeometry = new THREE.BoxGeometry(0.4, 0.3, 2);
      const rearMaterial = new THREE.MeshPhongMaterial({ color: 0x007aff });
      const rearBumper = new THREE.Mesh(rearGeometry, rearMaterial);
      rearBumper.castShadow = true;
      rearBumper.receiveShadow = true;
      rearBumper.position.set(2.2, 0.8, 0);
      legoVehicle.add(rearBumper);
      
      // --- Wheels (Lego Round Pieces) ---
      const wheelGeometry = new THREE.CylinderGeometry(0.5, 0.5, 0.3, 16);
      const wheelMaterial = new THREE.MeshPhongMaterial({ color: 0x1c1c1e });
      function createWheel(x, z) {
        const wheel = new THREE.Mesh(wheelGeometry, wheelMaterial);
        wheel.rotation.z = Math.PI / 2;
        wheel.castShadow = true;
        wheel.receiveShadow = true;
        wheel.position.set(x, 0.3, z);
        return wheel;
      }
      legoVehicle.add(createWheel(-1.5, 1));
      legoVehicle.add(createWheel(-1.5, -1));
      legoVehicle.add(createWheel(1.5, 1));
      legoVehicle.add(createWheel(1.5, -1));
      
      // Add the vehicle to the scene
      scene.add(legoVehicle);
      
      // Setup UI controls
      setupControls();
      
      window.addEventListener('resize', onWindowResize, false);
      animate();
    }
    
    function setupControls() {
      document.getElementById('rotate-left').addEventListener('click', () => {
        vehicleRotationSpeed = 0.05;
      });
      document.getElementById('rotate-right').addEventListener('click', () => {
        vehicleRotationSpeed = -0.05;
      });
      document.getElementById('move-forward').addEventListener('click', () => {
        vehicleSpeed = 0.1;
      });
      document.getElementById('move-backward').addEventListener('click', () => {
        vehicleSpeed = -0.1;
      });
      document.getElementById('reset').addEventListener('click', () => {
        vehicleSpeed = 0;
        vehicleRotationSpeed = 0;
        legoVehicle.position.set(0, 0, 0);
        legoVehicle.rotation.set(0, 0, 0);
      });
    }
    
    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }
    
    function animate() {
      requestAnimationFrame(animate);
      const delta = clock.getDelta();
      // Update vehicle rotation and forward movement
      legoVehicle.rotation.y += vehicleRotationSpeed;
      const forward = new THREE.Vector3(0, 0, -1).applyQuaternion(legoVehicle.quaternion);
      legoVehicle.position.add(forward.multiplyScalar(vehicleSpeed * delta * 60));
      
      // Pulsating effect on the cabin (simulate dynamic lego part)
      legoVehicle.children.forEach(child => {
        if(child.userData.originalScale) {
          const scaleFactor = 1 + 0.1 * Math.sin(Date.now() * 0.005);
          child.scale.set(scaleFactor, scaleFactor, scaleFactor);
        }
      });
      
      renderer.render(scene, camera);
    }
    
    init();
  </script>
</body>
</html>
